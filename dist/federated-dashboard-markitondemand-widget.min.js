!function(a){"use strict";window.namespace=function(b,c){for(var d,e=window,f=b.split(".");d=f.shift();)e[d]=e[d]||{},e=e[d];a.extend(e,c)}}(window._),function(){namespace("Stock"),Stock.API=function(){function a(){}return a.loadData=function(a,b){return $.ajax({method:"GET",url:"http://dev.markitondemand.com/Api/v2/Quote/jsonp",data:{symbol:a},dataType:"jsonp",success:b,error:console.log})},a}()}.call(this),function(){namespace("Stock"),Stock.Controller=function(){function a(){}return a.bind=function(){return $("[data-id=stock-button]").click(function(a){return function(){return a.getStockData(Stock.View.getInput())}}(this))},a.getStockData=function(a){return Stock.View.resetTable(),_.each(this.processInput(a),function(a){return Stock.API.loadData(a,Stock.View.outputData)})},a.processInput=function(a){return a.split(/\s+/)},a.setupWidgetIn=function(a){return Stock.View.displayFormIn(a),this.bind()},a}()}.call(this),function(){namespace("Stock"),Stock.Templates=function(){function a(){}return a.renderForm=function(){return _.template('<input name="stock-search" type="text"><br>\n<button id="stock" data-id="stock-button">Get Stock Data</button><br>\n<div data-id="stock-output"></div>')},a.renderEmptyTable=function(){return _.template('<table data-id="stock-display">\n  <thead>\n    <tr>\n      <th>Name</th>\n      <th>Change</th>\n      <th>Change Percent</th>\n      <th>Change Percent YTD</th>\n      <th>High</th>\n      <th>Low</th>\n      <th>Last Price</th>\n      <th>Market Cap</th>\n      <th>Open</th>\n      <th>Symbol</th>\n      <th>Volume</th>\n      <th>Time Stamp</th>\n    </tr>\n  </thead>\n  <tbody data-id="stock-body">\n  </tbody>\n</table>')},a.renderTableRow=function(a){return _.template("<tr>\n  <td><%= stockObj.name %></td>\n  <td><%= stockObj.change %></td>\n  <td><%= stockObj.changePercent %></td>\n  <td><%= stockObj.changePercentYTD %></td>\n  <td><%= stockObj.high %></td>\n  <td><%= stockObj.low %></td>\n  <td><%= stockObj.lastPrice %></td>\n  <td><%= stockObj.marketCap %></td>\n  <td><%= stockObj.open %></td>\n  <td><%= stockObj.symbol %></td>\n  <td><%= stockObj.volume %></td>\n  <td><%= stockObj.timestamp %></td>\n</tr>",{stockObj:a})},a}()}.call(this),function(){namespace("Stock"),Stock.View=function(){function a(){}return a.getInput=function(){return $("[name=stock-search]").val()},a.outputData=function(a){var b,c;return b=Stock.View.formatResponse(a),c=Stock.Templates.renderTableRow(b),$("[data-id=stock-body]").append(c)},a.resetTable=function(){var a;return a=Stock.Templates.renderEmptyTable(),$("[data-id=stock-output]").html(a)},a.displayFormIn=function(a){var b;return b=Stock.Templates.renderForm(),$(a).html(b)},a.formatResponse=function(a){return{name:a.Name,symbol:a.Symbol,change:a.Change.toFixed(2),changePercent:a.ChangePercent.toFixed(2),changePercentYTD:a.ChangePercentYTD.toFixed(2),open:a.Open.toFixed(2),changeYTD:a.ChangeYTD.toFixed(2),high:a.High,lastPrice:a.LastPrice,low:a.Low,msDate:a.MSDate.toFixed(2),marketCap:a.MarketCap,open:a.Open,timestamp:a.Timestamp.substr(0,18),volume:a.Volume}},a}()}.call(this);